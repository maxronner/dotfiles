#!/bin/bash

THRESHOLD=25

send() {
    BATTERY_LEVEL=$(cat /sys/class/power_supply/BAT0/capacity)
    BATTERY_STATUS=$(cat /sys/class/power_supply/BAT0/status)

    if [[ "$BATTERY_LEVEL" -le "$THRESHOLD" && "$BATTERY_STATUS" == "Discharging" ]]; then
        notify-send --urgency=critical "⚠️ Low Battery" "Battery is at ${BATTERY_LEVEL}%. Please plug in your charger!"
    fi
}
while inotifywait -e modify /sys/class/power_supply/BAT0/capacity ; do
    send
done
