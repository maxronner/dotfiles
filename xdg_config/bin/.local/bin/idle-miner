#!/bin/bash
# Save as ~/scripts/check_idle_and_mine.sh

IDLE_SECONDS=$(xprintidle 2>/dev/null || echo 0)
IDLE_THRESHOLD=300000  # 5 minutes in milliseconds

if [ $IDLE_SECONDS -gt $IDLE_THRESHOLD ]; then
  xmrig -c ~/.xmrig/config.json
else
  killall xmrig 2>/dev/null
fi
