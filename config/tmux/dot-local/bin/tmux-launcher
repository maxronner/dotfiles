#!/bin/bash

SESSION_NAME="${1:-$(basename "$PWD")}"

if ! command -v tmux &> /dev/null; then
    echo "Error: tmux is not installed or not in PATH." >&2
    exit 1
fi

if tmux ls >/dev/null 2>&1 ; then
    echo "tmux is running. Attaching..."
    tmux attach
    exit 0
fi

if tmux has-session -t "$SESSION_NAME" 2>/dev/null; then
    echo "Session '$SESSION_NAME' already exists. Attaching..."
else
    echo "Creating new session '$SESSION_NAME'..."
    tmux new-session -d -s "$SESSION_NAME"
fi
tmux attach-session -t "$SESSION_NAME"
