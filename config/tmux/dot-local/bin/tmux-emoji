#!/bin/bash

caller_pane=$(tmux display-message -p '#{pane_id}')
mode=$1

tmux neww bash -c "
  emoji=\$(fzf-emoji);
  if [ -n \"\$emoji\" ]; then
    if [ \"$mode\" = 'clipboard' ]; then
      echo -n \"\$emoji\" | wl-copy
    else
      tmux send-keys -t '$caller_pane' \"\$emoji\"
    fi
  fi
  tmux kill-pane
"

tmux select-pane -t "$caller_pane"

