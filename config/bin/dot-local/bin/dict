#!/usr/bin/env bash

word=${1:-$(wl-paste)}
query=$(curl -s "https://api.dictionaryapi.dev/api/v2/entries/en_US/$word")
[ -z "$query" ] && notify-send -t 3000 "Invalid word." && exit 0

# Show first definition for each part of speech
def=$(echo "$query" | jq -r '.[0].meanings[] | "\(.partOfSpeech): \(.definitions[0].definition)\n"')

if [ -z "$def" ]; then
    notify-send -t 3000 "$word -" "No definition found." && exit 0
fi

notify-send -t 10000 "$word -" "$def"
