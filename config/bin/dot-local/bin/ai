#!/usr/bin/env bash
set -euo pipefail

if [[ -z "${API_KEY:-}" ]]; then
  case "$LLM_PROVIDER" in
    gemini|claude|openai)
      API_KEY="$(pass "Credentials/keys/$LLM_PROVIDER")"
      ;;
    *)
      echo "fatal: key cannot be inferred for LLM_PROVIDER '$LLM_PROVIDER'" >&2
      exit 1
      ;;
  esac
fi

LLM_KEY="$API_KEY" clai "$@"
